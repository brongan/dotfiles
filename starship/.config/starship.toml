palette = "google_dark"

shell = ["sh"]

# Timeout for starship to scan files (in milliseconds)
scan_timeout = 30

[palettes.google_dark]
dark_grey = "#333333"
mid_grey  = "#444444"
light_grey = "#555555"
white     = "#ffffff"
yellow    = "#ffff00"
red       = "#ff0000"
blue      = "#0000ff"
purple    = "#800080"

format = """\
$username\
$hostname\
$shlvl\
$singularity\
$directory\
$docker_context\
$nix_shell\
$conda\
$aws\
$gcloud\
$env_var\
$cmd_duration\
$custom\
$line_break\
$jobs\
$battery\
$time\
$status\
$character\
"""

[aws]
disabled = false
format = '[[ÓÇ∞](bg:#444444 fg:#333333)[on](bg:#444444 fg:white) $symbol$profile(\($region\))[ÓÇ∞](bg:#333333 fg:#444444)]($style)'
symbol = "ÓåΩ "
style = "bold bg:#444444 fg:yellow"

[battery]
disabled = false
full_symbol = "Ôï∏"
charging_symbol = "ÔñÉ"
discharging_symbol = "ÔñÇ"
format = "[[ÓÇ∞](bg:#555555 fg:#333333)$symbol$percentage[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
[[battery.display]]
threshold = 10
style = "bg:#555555 fg:red"

[character]
disabled = false
format = "$symbol "
success_symbol = "[[ÓÇ∞](bg:green fg:#333333)ÓÇ∞](fg:green)"
error_symbol = "[[ÓÇ∞](bg:red fg:#333333)ÓÇ∞](fg:red)"
vicmd_symbol = "[[ÓÇ≤](fg:green bg:#333333)ÓÇ≤](bg:green fg:#000000)"

[cmake]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Ô®∂ "
style = "bg:#444444 fg:blue"

[cmd_duration]
disabled = false
min_time = 2_000
format = "[[ÓÇ∞](bg:#555555 fg:#333333)took $duration[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
show_milliseconds = false
style = "bold bg:#555555 fg:yellow"
show_notifications = false
min_time_to_notify = 45_000

[conda]
disabled = false
truncation_length = 1
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$environment[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "ÔÑå "
style = "bg:#444444 fg:green"
ignore_base = true

[crystal]
disabled = false
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Ôàô "
style = "bg:#444444 fg:red"

[dart]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Óûò "
style = "bg:#444444 fg:blue"

[directory]
disabled = false 
truncation_length = 3
truncate_to_repo = true
format = "[[ÓÇ∞](bg:light_grey fg:dark_grey)$path [ÓÇ∞](bg:dark_grey fg:light_grey)]($style)([[ÓÇ∞](bg:light_grey fg:dark_grey)$read_only[ÓÇ∞](bg:dark_grey fg:light_grey)]($read_only_style))"
style = "italic bg:light_grey fg:cyan"
read_only = "Ô†Ω"
read_only_style = "bg:light_grey fg:red"

[git_state]
disabled = false
rebase = "REBASING"
merge = "MERGING"
revert = "REVERTING"
cherry_pick = "CHERRY-PICKING"
bisect = "BISECTING"
am = "AM"
am_or_rebase = "AM/REBASE"
style = "bold bg:#555555 fg:yellow"
format = '\([[ÓÇ∞](bg:#555555 fg:#333333)$state( $progress_current/$progress_total )[ÓÇ∞](bg:#333333 fg:#555555)]($style)\)'


[git_status]
disabled = true

[git_commit]
disabled = true

[git_metrics]
disabled = true

[git_branch]
disabled = true

[docker_context]
disabled = false
symbol = "Ôåà "
style = "bold bg:#444444 fg:blue"
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$context[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
only_with_files = true

[dotnet]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)$symbol$version( ÔØë $tfm)[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "‚Ä¢NET "
style = "bg:#444444 fg:blue"
heuristic = true

[elixir]
disabled = true
format = '[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$versi[on](bg:#444444 fg:white) \(OTP $otp_version\)[ÓÇ∞](bg:#333333 fg:#444444)]($style)'
symbol = "Óâµ "
style = "bg:#444444 fg:purple"

[elm]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Óò¨ "
style = "bg:#444444 fg:cyan"

[env_var]
disabled = false
symbol = ""
style = "bold bg:#555555 fg:#000000"
format = "([[ÓÇ∞](bg:#555555 fg:#333333)[with](bg:#555555 fg:white) $symbol$env_value[ÓÇ∞](bg:#333333 fg:#555555)]($style))"

[erlang]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Óû± "
style = "bg:#444444 fg:red"

[gcloud]
disabled = false
format = '[[ÓÇ∞](bg:#444444 fg:#333333)[on](bg:#444444 fg:white) $symbol$account(\($region\))[ÓÇ∞](bg:#333333 fg:#444444)]($style)'
symbol = "ÓåΩ "
style = "bold bg:#444444 fg:blue"

[golang]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Óòß "
style = "bg:#444444 fg:cyan"

[helm]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "‚éà "
style = "bg:#444444 fg:white"

[hostname]
disabled = false
ssh_only = true
trim_at = "."
format = "[[ÓÇ∞](bg:#555555 fg:#333333)($style)$hostname(bg:#555555 fg:white)[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
style = "bold dimmed bg:#555555 fg:green"

[java]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
style = "dimmed bg:#444444 fg:red"
symbol = "Óâñ "

[jobs]
disabled = false
threshold = 1
format = "[[ÓÇ∞](bg:#555555 fg:#333333)$symbol$number[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
symbol = "‚ú¶"
style = "bold bg:#555555 fg:blue"

[julia]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Óò§ "
style = "bg:#444444 fg:purple"

[kubernetes]
disabled = true
symbol = "‚ò∏ "
format = '[[ÓÇ∞](bg:#444444 fg:#333333)$symbol$context( \($namespace\)) in[ÓÇ∞](bg:#333333 fg:#444444)]($style)'
style = "bold bg:#444444 fg:cyan"

[line_break]
disabled = true

[memory_usage]
disabled = true
threshold = 75
format = "[[ÓÇ∞](bg:#555555 fg:#333333)[via](bg:#555555 fg:white) $symbol$ram( | $swap)[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
style = "bold dimmed bg:#555555 fg:white"
symbol = "Ô°ö "

[hg_branch]
disabled = true
symbol = "Ôêò "
style = "bg:#555555 fg:purple"
format = "[[ÓÇ∞](bg:#555555 fg:#333333)[on](bg:#555555 fg:white) $symbol$branch[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
truncation_symbol = "‚Ä¶"

[nim]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Ôö§ "
style = "bg:#444444 fg:yellow"

[nix_shell]
disabled = false
format = '[[ÓÇ∞](bg:#555555 fg:#333333)[via](bg:#555555 fg:white) $symbol$state( \($name\))[ÓÇ∞](bg:#333333 fg:#555555)]($style)'
symbol = "Ôãú "
style = "bold bg:#555555 fg:blue"
impure_msg = "impure"
pure_msg = "pure"

[nodejs]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Óâè "
style = "bg:#444444 fg:green"

[ocaml]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "üê´ "
style = "bg:#444444 fg:yellow"

[package]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[is](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Ô£ñ "
style = "bg:#444444 fg:208"
display_private = false

[perl]
disabled = true
symbol = "Óù© "
style = "bg:#444444 fg:149"
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"

[php]
disabled = true
symbol = "Óòà "
style = "bg:#444444 fg:147"
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"

[purescript]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "<=> "
style = "bg:#444444 fg:white"

[ruby]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "Óàæ "
style = "bg:#444444 fg:red"

[rust]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "ÔÄì "
style = "bg:#444444 fg:red"

[shlvl]
disabled = true
threshold = 2
format = "[[ÓÇ∞](bg:#555555 fg:#333333)$symbol$shlvl[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
symbol = "‚Üï"
style = "bold bg:#555555 fg:yellow"

[singularity]
disabled = false
format = '[[ÓÇ∞](bg:#444444 fg:#333333)$symbol\[$env\][ÓÇ∞](bg:#333333 fg:#444444)]($style)'
symbol = ""
style = "bold dimmed bg:#444444 fg:blue"

[swift]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "ÔØ£ "
style = "bg:#444444 fg:202"

[status]
disabled = true
format = "[[ÓÇ∞](bg:#555555 fg:#333333)$symbol$status[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
symbol = " ‚úñ"
style = "bold bg:#555555 fg:red"

[terraform]
disabled = true
format = '[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol\($workspace\)[ÓÇ∞](bg:#333333 fg:#444444)]($style)'
symbol = "Ô∞â "
style = "bold bg:#444444 fg:105"

[time]
disabled = true
format = "[[ÓÇ∞](bg:#555555 fg:#333333)at $time[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
style = "bold bg:#555555 fg:yellow"
use_12hr = false
time_format = ""
utc_time_offset = "local"
time_range = "-"

[username]
disabled = true
format = "[[ÓÇ∞](bg:#555555 fg:#333333)$user [in](bg:#555555 fg:white)[ÓÇ∞](bg:#333333 fg:#555555)]($style)"
style_root = "bold bg:#555555 fg:red"
style_user = "bold bg:#555555 fg:yellow"
show_always = false

[zig]
disabled = true
format = "[[ÓÇ∞](bg:#444444 fg:#333333)[via](bg:#444444 fg:white) $symbol$version[ÓÇ∞](bg:#333333 fg:#444444)]($style)"
symbol = "‚ÜØ "
style = "bg:#444444 fg:yellow"

[custom.jj]
description = "The current jj status"
detect_folders = [".jj"]
symbol = "ü•ã "
style = "bold bg:light_grey fg:purple"
format = "[[ÓÇ∞](bg:light_grey fg:dark_grey)(bg:light_grey fg:white) $symbol$output[ÓÇ∞](bg:dark_grey fg:light_grey)]($style)"
command = '''
jj log --revisions @ --no-graph --ignore-working-copy --color never --limit 1 --no-pager --template '
  separate(" ",
    change_id.shortest(4),
    bookmarks,
    concat(
      if(conflict, "üí•"),
      if(divergent, "üöß"),
      if(hidden, "üëª"),
      if(immutable, "üîí"),
    ),
    if(empty, "(empty)"),
    coalesce(
      truncate_end(29, description.first_line(), "‚Ä¶"),
    )
  )
'
'''

[custom.jjstate]
when = "jj --ignore-working-copy root"
symbol = "¬±" 
style = "bold bg:light_grey fg:purple"
format = "[[ÓÇ∞](bg:light_grey fg:dark_grey)(bg:light_grey fg:white)$symbol$output[ÓÇ∞](bg:dark_grey fg:light_grey)]($style)"
command = '''
jj log -r@ -n1 --ignore-working-copy --no-graph --no-pager -T "" --stat | tail -n1 | sd "(\d+) files? changed, (\d+) insertions?\(\+\), (\d+) deletions?\(-\)" ' ${1}m ${2}+ ${3}-' | sd " 0." ""
'''

[custom.git_commit]
when = "test ! -d .jj && git rev-parse --verify HEAD >/dev/null 2>&1"
command = "git rev-parse --short HEAD"
format = '([[ÓÇ∞](bg:light_grey fg:dark_grey)$output[ÓÇ∞](bg:dark_grey fg:light_grey)]($style))'
style = "bold bg:light_grey fg:green"

[custom.git_metrics]
when = "! jj --ignore-working-copy root"
command = "starship module git_metrics"
description = "Only show git_metrics if we're not in a jj repo"
style = ""

[custom.git_branch]
when = """ root=$(git rev-parse --show-toplevel 2>/dev/null) && test ! -d "$root/.jj" """
description = "Show git branch only if not in a jj repo"
style = "bold bg:light_grey fg:purple"
format = "[[ÓÇ∞](bg:light_grey fg:dark_grey)(bg:light_grey fg:white)$symbol$output[ÓÇ∞](bg:dark_grey fg:light_grey)]($style)"
command = "git branch --show-current 2>/dev/null"
symbol = "Ôêò "

[custom.fig]
shell = ["zsh", "--no-rcs", "-c"]
format = "[[ÓÇ∞](bg:light_grey fg:dark_grey) ÔÜ† $output[ÓÇ∞](bg:dark_grey fg:light_grey)]($style)"
command = """ echo "$PWD" | sed -n "s|^/google/src/cloud/$USER/\\([^/]*\\).*|\\1|p" """
when = """ [[ "$PWD" == "/google/src/cloud/$USER"* ]] """
style = "bold bg:mid_grey fg:blue"

